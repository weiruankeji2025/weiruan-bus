# weiruan-bus

公交车线路规划系统 - 智能公交出行助手

## 项目简介

这是一个功能完善的公交车线路规划程序，支持多种路径规划算法，能够为用户提供最优的公交出行方案。

## 核心功能

1. **多算法路径规划**
   - BFS算法：查找最少换乘方案
   - Dijkstra算法：查找最短时间方案
   - 自动识别直达线路

2. **完整的时间信息**
   - 实时计算等待时间
   - 显示行驶时间
   - 支持动态时刻表

3. **详细的票价信息**
   - 分段票价计算
   - 总票价统计

4. **智能站点搜索**
   - 支持模糊匹配
   - 多结果智能选择

5. **换乘方案优化**
   - 最多支持3次换乘
   - 自动选择最优换乘站点
   - 详细的换乘指引

## 项目结构

```
weiruan-bus/
├── src/
│   ├── models/          # 数据模型
│   │   ├── station.py   # 站点模型
│   │   ├── route.py     # 线路模型
│   │   └── schedule.py  # 时刻表模型
│   ├── planner/         # 路径规划
│   │   ├── graph.py     # 图构建
│   │   └── pathfinder.py # 路径算法
│   ├── data/            # 数据文件
│   │   └── shenzhen_nanshan.py # 深圳南山区数据
│   └── cli.py           # 命令行界面
├── tests/               # 测试文件
│   └── test_nanshan.py  # 南山区测试
├── main.py              # 主程序入口
└── requirements.txt     # 依赖包
```

## 安装与使用

### 安装依赖

```bash
pip install -r requirements.txt
```

### 运行主程序

```bash
python main.py
```

### 运行测试

```bash
python tests/test_nanshan.py
```

## 功能演示

### 1. 交互式规划

程序提供友好的交互式界面，支持：
- 规划路线（最少换乘）
- 规划路线（最短时间）
- 查看线路信息
- 查看网络统计

### 2. 测试数据

当前已包含深圳南山区公交数据：
- 5条公交线路（M492、M475、72、B737、M506）
- 22个公交站点
- 完整的时刻表信息

## 技术特点

1. **图算法**：基于图论实现高效的路径搜索
2. **多策略优化**：支持不同优化目标（换乘次数、时间、票价）
3. **可扩展性**：易于添加新的城市和线路数据
4. **模块化设计**：清晰的代码结构，便于维护和扩展

## 数据格式

### 站点数据
- 站点ID、名称、经纬度
- 所属城市、区县

### 线路数据
- 线路ID、名称
- 站点列表（按顺序）
- 票价、运营时间
- 发车间隔

## 扩展说明

要添加新的城市数据，只需：
1. 在 `src/data/` 目录下创建新的数据文件
2. 按照相同的格式定义站点和线路
3. 在主程序中加载数据

## 作者

weiruankeji2025

## 许可证

见 LICENSE 文件